{"ast":null,"code":"import _objectSpread from\"/home/besargega/Documents/react-invoice-generator/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/besargega/Documents/react-invoice-generator/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState}from'react';import Slider from'rc-slider';import{Image}from'@react-pdf/renderer';import useOnClickOutside from'../hooks/useOnClickOutside';import compose from'../styles/compose';import'rc-slider/assets/index.css';var EditableFileImage=function EditableFileImage(_ref){var className=_ref.className,placeholder=_ref.placeholder,value=_ref.value,width=_ref.width,onChangeImage=_ref.onChangeImage,onChangeWidth=_ref.onChangeWidth,pdfMode=_ref.pdfMode;var fileInput=useRef(null);var widthWrapper=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isEditing=_useState2[0],setIsEditing=_useState2[1];var marks={100:'100px',150:'150px',200:'200px',250:'250px'};var handleClickOutside=function handleClickOutside(){if(isEditing){setIsEditing(false);}};useOnClickOutside(widthWrapper,handleClickOutside);var handleUpload=function handleUpload(){var _fileInput$current;fileInput===null||fileInput===void 0?void 0:(_fileInput$current=fileInput.current)===null||_fileInput$current===void 0?void 0:_fileInput$current.click();};var handleChangeImage=function handleChangeImage(){var _fileInput$current2;if(fileInput===null||fileInput===void 0?void 0:(_fileInput$current2=fileInput.current)===null||_fileInput$current2===void 0?void 0:_fileInput$current2.files){var files=fileInput.current.files;if(files.length>0&&typeof onChangeImage==='function'){var reader=new FileReader();reader.addEventListener('load',function(){if(typeof reader.result==='string'){onChangeImage(reader.result);}});reader.readAsDataURL(files[0]);}}};var handleChangeWidth=function handleChangeWidth(value){if(typeof onChangeWidth==='function'){onChangeWidth(value);}};var handleEdit=function handleEdit(){setIsEditing(!isEditing);};var clearImage=function clearImage(){if(typeof onChangeImage==='function'){onChangeImage('');}};if(pdfMode){if(value){return/*#__PURE__*/React.createElement(Image,{style:_objectSpread(_objectSpread({},compose(\"image \".concat(className?className:''))),{},{maxWidth:width}),src:value});}else{return/*#__PURE__*/React.createElement(React.Fragment,null);}}return/*#__PURE__*/React.createElement(\"div\",{className:\"image \".concat(value?'mb-5':'',\" \").concat(className?className:'')},!value?/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"image__upload\",onClick:handleUpload},placeholder):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"img\",{src:value,className:\"image__img\",alt:placeholder,style:{maxWidth:width||100}}),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"image__change\",onClick:handleUpload},\"Change Image\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"image__edit\",onClick:handleEdit},\"Resize Image\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"image__remove\",onClick:clearImage},\"Remove\"),isEditing&&/*#__PURE__*/React.createElement(\"div\",{ref:widthWrapper,className:\"image__width-wrapper\"},/*#__PURE__*/React.createElement(Slider,{min:100,max:250,marks:marks,included:false,step:1,onChange:handleChangeWidth,defaultValue:width||100}))),/*#__PURE__*/React.createElement(\"input\",{ref:fileInput,tabIndex:-1,type:\"file\",accept:\"image/*\",className:\"image__file\",onChange:handleChangeImage}));};export default EditableFileImage;","map":{"version":3,"names":["React","useRef","useState","Slider","Image","useOnClickOutside","compose","EditableFileImage","_ref","className","placeholder","value","width","onChangeImage","onChangeWidth","pdfMode","fileInput","widthWrapper","_useState","_useState2","_slicedToArray","isEditing","setIsEditing","marks","handleClickOutside","handleUpload","_fileInput$current","current","click","handleChangeImage","_fileInput$current2","files","length","reader","FileReader","addEventListener","result","readAsDataURL","handleChangeWidth","handleEdit","clearImage","createElement","style","_objectSpread","concat","maxWidth","src","Fragment","type","onClick","alt","ref","min","max","included","step","onChange","defaultValue","tabIndex","accept"],"sources":["/home/besargega/Documents/react-invoice-generator/src/components/EditableFileImage.tsx"],"sourcesContent":["import React, { FC, useRef, useState } from 'react'\nimport Slider from 'rc-slider'\nimport { Image } from '@react-pdf/renderer'\nimport useOnClickOutside from '../hooks/useOnClickOutside'\nimport compose from '../styles/compose'\nimport 'rc-slider/assets/index.css'\n\ninterface Props {\n  className?: string\n  placeholder?: string\n  value?: string\n  width?: number\n  onChangeImage?: (value: string) => void\n  onChangeWidth?: (value: number) => void\n  pdfMode?: boolean\n}\n\nconst EditableFileImage: FC<Props> = ({ className, placeholder, value, width, onChangeImage, onChangeWidth, pdfMode }) => {\n  const fileInput = useRef<HTMLInputElement>(null)\n  const widthWrapper = useRef<HTMLDivElement>(null)\n  const [isEditing, setIsEditing] = useState<boolean>(false)\n  const marks = {\n    100: '100px',\n    150: '150px',\n    200: '200px',\n    250: '250px'\n  }\n\n  const handleClickOutside = () => {\n    if (isEditing) {\n      setIsEditing(false)\n    }\n  }\n\n  useOnClickOutside(widthWrapper, handleClickOutside)\n\n  const handleUpload = () => {\n    fileInput?.current?.click()\n  }\n\n  const handleChangeImage = () => {\n    if (fileInput?.current?.files) {\n      const files = fileInput.current.files\n\n      if (files.length > 0 && typeof onChangeImage === 'function') {\n        const reader = new FileReader()\n\n        reader.addEventListener('load', () => {\n          if (typeof reader.result === 'string') {\n            onChangeImage(reader.result)\n          }\n        })\n\n        reader.readAsDataURL(files[0])\n      }\n    }\n  }\n\n  const handleChangeWidth = (value: number) => {\n    if (typeof onChangeWidth === 'function') {\n      onChangeWidth(value)\n    }\n  }\n\n  const handleEdit = () => {\n    setIsEditing(!isEditing)\n  }\n\n  const clearImage = () => {\n    if (typeof onChangeImage === 'function') {\n      onChangeImage('')\n    }\n  }\n\n  if (pdfMode) {\n    if (value) {\n      return (\n        <Image\n          style={{...compose(`image ${className ? className : ''}`), maxWidth: width}}\n          src={value}\n        />\n      )\n    } else {\n      return <></>\n    }\n  }\n\n  return (\n    <div className={`image ${value ? 'mb-5' : ''} ${className ? className : ''}`}>\n      {!value ? (\n        <button\n          type=\"button\"\n          className=\"image__upload\"\n          onClick={handleUpload}\n        >\n          {placeholder}\n        </button>\n      ) : (\n        <>\n          <img\n            src={value}\n            className=\"image__img\"\n            alt={placeholder}\n            style={{ maxWidth: width || 100}}\n          />\n\n          <button\n            type=\"button\"\n            className=\"image__change\"\n            onClick={handleUpload}\n          >\n            Change Image\n          </button>\n\n          <button\n            type=\"button\"\n            className=\"image__edit\"\n            onClick={handleEdit}\n          >\n            Resize Image\n          </button>\n\n          <button\n            type=\"button\"\n            className=\"image__remove\"\n            onClick={clearImage}\n          >\n            Remove\n          </button>\n\n          {isEditing && (\n            <div ref={widthWrapper} className=\"image__width-wrapper\">\n              <Slider min={100} max={250} marks={marks} included={false} step={1} onChange={handleChangeWidth} defaultValue={width || 100} />\n            </div>\n          )}\n        </>\n      )}\n\n      <input\n        ref={fileInput}\n        tabIndex={-1}\n        type=\"file\"\n        accept=\"image/*\"\n        className=\"image__file\"\n        onChange={handleChangeImage}\n      />\n    </div>\n  )\n}\n\nexport default EditableFileImage\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}