{"ast":null,"code":"var _jsxFileName = \"/home/besargega/Documents/react-invoice-generator/src/components/EditableFileImage.tsx\";\nimport React, { useRef, useState } from 'react';\nimport Slider from 'rc-slider';\nimport { Image } from '@react-pdf/renderer';\nimport image from \"../../src/images/download.svg\";\nimport useOnClickOutside from '../hooks/useOnClickOutside';\nimport compose from '../styles/compose';\nimport 'rc-slider/assets/index.css';\nconst EditableFileImage = _ref => {\n  let {\n    className,\n    placeholder,\n    value,\n    width,\n    onChangeImage,\n    onChangeWidth,\n    pdfMode\n  } = _ref;\n  const fileInput = useRef(null);\n  const widthWrapper = useRef(null);\n  const [isEditing, setIsEditing] = useState(false);\n  const marks = {\n    100: '100px',\n    150: '150px',\n    200: '200px',\n    250: '250px'\n  };\n  const handleClickOutside = () => {\n    if (isEditing) {\n      setIsEditing(false);\n    }\n  };\n  useOnClickOutside(widthWrapper, handleClickOutside);\n  const handleUpload = () => {\n    var _fileInput$current;\n    fileInput === null || fileInput === void 0 ? void 0 : (_fileInput$current = fileInput.current) === null || _fileInput$current === void 0 ? void 0 : _fileInput$current.click();\n  };\n  const handleChangeImage = () => {\n    var _fileInput$current2;\n    if (fileInput === null || fileInput === void 0 ? void 0 : (_fileInput$current2 = fileInput.current) === null || _fileInput$current2 === void 0 ? void 0 : _fileInput$current2.files) {\n      const files = fileInput.current.files;\n      if (files.length > 0 && typeof onChangeImage === 'function') {\n        const reader = new FileReader();\n        reader.addEventListener('load', () => {\n          if (typeof reader.result === 'string') {\n            onChangeImage(reader.result);\n          }\n        });\n        reader.readAsDataURL(files[0]);\n      }\n    }\n  };\n  const handleChangeWidth = value => {\n    if (typeof onChangeWidth === 'function') {\n      onChangeWidth(value);\n    }\n  };\n  const handleEdit = () => {\n    setIsEditing(!isEditing);\n  };\n  const clearImage = () => {\n    if (typeof onChangeImage === 'function') {\n      onChangeImage('');\n    }\n  };\n  if (pdfMode) {\n    return /*#__PURE__*/React.createElement(Image, {\n      style: {\n        ...compose(`image ${className ? className : ''}`),\n        maxWidth: width\n      },\n      src: image,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }\n    });\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `image ${value ? 'mb-5' : ''} ${className ? className : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, !value ? /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"image__upload\",\n    onClick: handleUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, placeholder) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"img\", {\n    src: value,\n    className: \"image__img\",\n    alt: placeholder,\n    style: {\n      maxWidth: width || 100\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"image__change\",\n    onClick: handleUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, \"Change Image\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"image__edit\",\n    onClick: handleEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }, \"Resize Image\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"image__remove\",\n    onClick: clearImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, \"Remove\"), isEditing && /*#__PURE__*/React.createElement(\"div\", {\n    ref: widthWrapper,\n    className: \"image__width-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Slider, {\n    min: 100,\n    max: 250,\n    marks: marks,\n    included: false,\n    step: 1,\n    onChange: handleChangeWidth,\n    defaultValue: width || 100,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"input\", {\n    ref: fileInput,\n    tabIndex: -1,\n    type: \"file\",\n    accept: \"image/*\",\n    className: \"image__file\",\n    onChange: handleChangeImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }\n  }));\n};\nexport default EditableFileImage;","map":{"version":3,"names":["React","useRef","useState","Slider","Image","image","useOnClickOutside","compose","EditableFileImage","_ref","className","placeholder","value","width","onChangeImage","onChangeWidth","pdfMode","fileInput","widthWrapper","isEditing","setIsEditing","marks","handleClickOutside","handleUpload","_fileInput$current","current","click","handleChangeImage","_fileInput$current2","files","length","reader","FileReader","addEventListener","result","readAsDataURL","handleChangeWidth","handleEdit","clearImage","createElement","style","maxWidth","src","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","Fragment","alt","ref","min","max","included","step","onChange","defaultValue","tabIndex","accept"],"sources":["/home/besargega/Documents/react-invoice-generator/src/components/EditableFileImage.tsx"],"sourcesContent":["import React, { FC, useRef, useState } from 'react'\nimport Slider from 'rc-slider'\nimport { Image } from '@react-pdf/renderer'\nimport image from '../../src/images/download.svg'\nimport useOnClickOutside from '../hooks/useOnClickOutside'\nimport compose from '../styles/compose'\nimport 'rc-slider/assets/index.css'\n\ninterface Props {\n  className?: string\n  placeholder?: string\n  value?: string\n  width?: number\n  onChangeImage?: (value: string) => void\n  onChangeWidth?: (value: number) => void\n  pdfMode?: boolean\n}\n\nconst EditableFileImage: FC<Props> = ({ className, placeholder, value, width, onChangeImage, onChangeWidth, pdfMode }) => {\n  const fileInput = useRef<HTMLInputElement>(null)\n  const widthWrapper = useRef<HTMLDivElement>(null)\n  const [isEditing, setIsEditing] = useState<boolean>(false)\n  const marks = {\n    100: '100px',\n    150: '150px',\n    200: '200px',\n    250: '250px'\n  }\n\n  const handleClickOutside = () => {\n    if (isEditing) {\n      setIsEditing(false)\n    }\n  }\n\n  useOnClickOutside(widthWrapper, handleClickOutside)\n\n  const handleUpload = () => {\n    fileInput?.current?.click()\n  }\n\n  const handleChangeImage = () => {\n    if (fileInput?.current?.files) {\n      const files = fileInput.current.files\n\n      if (files.length > 0 && typeof onChangeImage === 'function') {\n        const reader = new FileReader()\n\n        reader.addEventListener('load', () => {\n          if (typeof reader.result === 'string') {\n            onChangeImage(reader.result)\n          }\n        })\n\n        reader.readAsDataURL(files[0])\n      }\n    }\n  }\n\n  const handleChangeWidth = (value: number) => {\n    if (typeof onChangeWidth === 'function') {\n      onChangeWidth(value)\n    }\n  }\n\n  const handleEdit = () => {\n    setIsEditing(!isEditing)\n  }\n\n  const clearImage = () => {\n    if (typeof onChangeImage === 'function') {\n      onChangeImage('')\n    }\n  }\n\n  if (pdfMode) {\n      return (\n        <Image\n          style={{...compose(`image ${className ? className : ''}`), maxWidth: width}}\n          src={image}\n        />\n      )\n  }\n\n  return (\n    <div className={`image ${value ? 'mb-5' : ''} ${className ? className : ''}`}>\n      {!value ? (\n        <button\n          type=\"button\"\n          className=\"image__upload\"\n          onClick={handleUpload}\n        >\n          {placeholder}\n        </button>\n      ) : (\n        <>\n          <img\n            src={value}\n            className=\"image__img\"\n            alt={placeholder}\n            style={{ maxWidth: width || 100}}\n          />\n\n          <button\n            type=\"button\"\n            className=\"image__change\"\n            onClick={handleUpload}\n          >\n            Change Image\n          </button>\n\n          <button\n            type=\"button\"\n            className=\"image__edit\"\n            onClick={handleEdit}\n          >\n            Resize Image\n          </button>\n\n          <button\n            type=\"button\"\n            className=\"image__remove\"\n            onClick={clearImage}\n          >\n            Remove\n          </button>\n\n          {isEditing && (\n            <div ref={widthWrapper} className=\"image__width-wrapper\">\n              <Slider min={100} max={250} marks={marks} included={false} step={1} onChange={handleChangeWidth} defaultValue={width || 100} />\n            </div>\n          )}\n        </>\n      )}\n\n      <input\n        ref={fileInput}\n        tabIndex={-1}\n        type=\"file\"\n        accept=\"image/*\"\n        className=\"image__file\"\n        onChange={handleChangeImage}\n      />\n    </div>\n  )\n}\n\nexport default EditableFileImage\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}