{"ast":null,"code":"var _jsxFileName = \"/home/besargega/Documents/react-invoice-generator/src/components/EditableFileImage.tsx\";\nimport React, { useRef, useState } from 'react';\nimport Slider from 'rc-slider';\nimport useOnClickOutside from '../hooks/useOnClickOutside';\nimport 'rc-slider/assets/index.css';\nconst EditableFileImage = _ref => {\n  let {\n    className,\n    placeholder,\n    value,\n    width,\n    onChangeImage,\n    onChangeWidth,\n    pdfMode\n  } = _ref;\n  const fileInput = useRef(null);\n  const widthWrapper = useRef(null);\n  const [isEditing, setIsEditing] = useState(false);\n  const marks = {\n    100: '100px',\n    150: '150px',\n    200: '200px',\n    250: '250px'\n  };\n  const handleClickOutside = () => {\n    if (isEditing) {\n      setIsEditing(false);\n    }\n  };\n  useOnClickOutside(widthWrapper, handleClickOutside);\n  const handleUpload = () => {\n    var _fileInput$current;\n    fileInput === null || fileInput === void 0 ? void 0 : (_fileInput$current = fileInput.current) === null || _fileInput$current === void 0 ? void 0 : _fileInput$current.click();\n  };\n  const handleChangeImage = () => {\n    var _fileInput$current2;\n    if (fileInput === null || fileInput === void 0 ? void 0 : (_fileInput$current2 = fileInput.current) === null || _fileInput$current2 === void 0 ? void 0 : _fileInput$current2.files) {\n      const files = fileInput.current.files;\n      if (files.length > 0 && typeof onChangeImage === 'function') {\n        const reader = new FileReader();\n        reader.addEventListener('load', () => {\n          if (typeof reader.result === 'string') {\n            onChangeImage(reader.result);\n          }\n        });\n        reader.readAsDataURL(files[0]);\n      }\n    }\n  };\n  const handleChangeWidth = value => {\n    if (typeof onChangeWidth === 'function') {\n      onChangeWidth(value);\n    }\n  };\n  const handleEdit = () => {\n    setIsEditing(!isEditing);\n  };\n  const clearImage = () => {\n    if (typeof onChangeImage === 'function') {\n      onChangeImage('');\n    }\n  };\n\n  // if (pdfMode) {\n  //   if (value) {\n  //     return (\n  //       <Image\n  //         style={{...compose(`image ${className ? className : ''}`), maxWidth: width}}\n  //         src={value}\n  //       />\n  //     )\n  //   } else {\n  //     return <></>\n  //   }\n  // }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `image ${value ? 'mb-5' : ''} ${className ? className : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }\n  }, value ? /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"image__upload\",\n    onClick: handleUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, placeholder) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"img\", {\n    src: value,\n    className: \"image__img\",\n    alt: placeholder,\n    style: {\n      maxWidth: width || 100\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"image__change\",\n    onClick: handleUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, \"Change Image\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"image__edit\",\n    onClick: handleEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, \"Resize Image\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"image__remove\",\n    onClick: clearImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }, \"Remove\"), isEditing && /*#__PURE__*/React.createElement(\"div\", {\n    ref: widthWrapper,\n    className: \"image__width-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Slider, {\n    min: 100,\n    max: 250,\n    marks: marks,\n    included: false,\n    step: 1,\n    onChange: handleChangeWidth,\n    defaultValue: width || 100,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"input\", {\n    ref: fileInput,\n    tabIndex: -1,\n    type: \"file\",\n    accept: \"image/*\",\n    className: \"image__file\",\n    onChange: handleChangeImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }\n  }));\n};\nexport default EditableFileImage;","map":{"version":3,"names":["React","useRef","useState","Slider","useOnClickOutside","EditableFileImage","_ref","className","placeholder","value","width","onChangeImage","onChangeWidth","pdfMode","fileInput","widthWrapper","isEditing","setIsEditing","marks","handleClickOutside","handleUpload","_fileInput$current","current","click","handleChangeImage","_fileInput$current2","files","length","reader","FileReader","addEventListener","result","readAsDataURL","handleChangeWidth","handleEdit","clearImage","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","Fragment","src","alt","style","maxWidth","ref","min","max","included","step","onChange","defaultValue","tabIndex","accept"],"sources":["/home/besargega/Documents/react-invoice-generator/src/components/EditableFileImage.tsx"],"sourcesContent":["import React, { FC, useRef, useState } from 'react'\nimport Slider from 'rc-slider'\nimport { Image } from '@react-pdf/renderer'\nimport useOnClickOutside from '../hooks/useOnClickOutside'\nimport compose from '../styles/compose'\nimport 'rc-slider/assets/index.css'\n\ninterface Props {\n  className?: string\n  placeholder?: string\n  value?: string\n  width?: number\n  onChangeImage?: (value: string) => void\n  onChangeWidth?: (value: number) => void\n  pdfMode?: boolean\n}\n\nconst EditableFileImage: FC<Props> = ({ className, placeholder, value, width, onChangeImage, onChangeWidth, pdfMode }) => {\n  const fileInput = useRef<HTMLInputElement>(null)\n  const widthWrapper = useRef<HTMLDivElement>(null)\n  const [isEditing, setIsEditing] = useState<boolean>(false)\n  const marks = {\n    100: '100px',\n    150: '150px',\n    200: '200px',\n    250: '250px'\n  }\n\n  const handleClickOutside = () => {\n    if (isEditing) {\n      setIsEditing(false)\n    }\n  }\n\n  useOnClickOutside(widthWrapper, handleClickOutside)\n\n  const handleUpload = () => {\n    fileInput?.current?.click()\n  }\n\n  const handleChangeImage = () => {\n    if (fileInput?.current?.files) {\n      const files = fileInput.current.files\n\n      if (files.length > 0 && typeof onChangeImage === 'function') {\n        const reader = new FileReader()\n\n        reader.addEventListener('load', () => {\n          if (typeof reader.result === 'string') {\n            onChangeImage(reader.result)\n          }\n        })\n\n        reader.readAsDataURL(files[0])\n      }\n    }\n  }\n\n  const handleChangeWidth = (value: number) => {\n    if (typeof onChangeWidth === 'function') {\n      onChangeWidth(value)\n    }\n  }\n\n  const handleEdit = () => {\n    setIsEditing(!isEditing)\n  }\n\n  const clearImage = () => {\n    if (typeof onChangeImage === 'function') {\n      onChangeImage('')\n    }\n  }\n\n  // if (pdfMode) {\n  //   if (value) {\n  //     return (\n  //       <Image\n  //         style={{...compose(`image ${className ? className : ''}`), maxWidth: width}}\n  //         src={value}\n  //       />\n  //     )\n  //   } else {\n  //     return <></>\n  //   }\n  // }\n\n  return (\n    <div className={`image ${value ? 'mb-5' : ''} ${className ? className : ''}`}>\n      {value ? (\n        <button\n          type=\"button\"\n          className=\"image__upload\"\n          onClick={handleUpload}\n        >\n          {placeholder}\n        </button>\n      ) : (\n        <>\n          <img\n            src={value}\n            className=\"image__img\"\n            alt={placeholder}\n            style={{ maxWidth: width || 100}}\n          />\n\n          <button\n            type=\"button\"\n            className=\"image__change\"\n            onClick={handleUpload}\n          >\n            Change Image\n          </button>\n\n          <button\n            type=\"button\"\n            className=\"image__edit\"\n            onClick={handleEdit}\n          >\n            Resize Image\n          </button>\n\n          <button\n            type=\"button\"\n            className=\"image__remove\"\n            onClick={clearImage}\n          >\n            Remove\n          </button>\n\n          {isEditing && (\n            <div ref={widthWrapper} className=\"image__width-wrapper\">\n              <Slider min={100} max={250} marks={marks} included={false} step={1} onChange={handleChangeWidth} defaultValue={width || 100} />\n            </div>\n          )}\n        </>\n      )}\n\n      <input\n        ref={fileInput}\n        tabIndex={-1}\n        type=\"file\"\n        accept=\"image/*\"\n        className=\"image__file\"\n        onChange={handleChangeImage}\n      />\n    </div>\n  )\n}\n\nexport default EditableFileImage\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}